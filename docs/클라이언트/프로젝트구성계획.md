# Synaptic 프로젝트 구조

## 1. 디렉토리 구조

```typescript
synaptic/
├── src/
│   ├── app/                    // 앱 핵심 설정
│   │   ├── providers/          // 전역 프로바이더
│   │   ├── store/             // 상태 관리
│   │   └── routes/            // 라우팅 설정
│   │
│   ├── features/              // 주요 기능별 모듈
│   │   ├── synapse-map/       // 시냅스 맵 기능
│   │   │   ├── components/    // 맵 관련 컴포넌트
│   │   │   ├── hooks/        // 맵 관련 훅
│   │   │   ├── store/        // 맵 상태 관리
│   │   │   └── utils/        // 맵 유틸리티
│   │   │
│   │   ├── notes/            // 노트 시스템
│   │   ├── blog/             // 블로그 시스템
│   │   └── analytics/        // 분석 시스템
│   │
│   ├── shared/               // 공유 리소스
│   │   ├── components/       // 공통 컴포넌트
│   │   ├── hooks/           // 공통 훅
│   │   ├── utils/           // 유틸리티
│   │   └── types/           // 공통 타입
│   │
│   └── core/                // 핵심 비즈니스 로직
│       ├── api/            // API 클라이언트
│       ├── auth/           // 인증 관련
│       └── config/         // 환경 설정
```

## 2. 컴포넌트 구조

### 2.1 시냅스 맵 컴포넌트
```typescript
features/synapse-map/
├── components/
│   ├── SynapseMap/           // 메인 맵 컴포넌트
│   │   ├── index.tsx
│   │   ├── Node.tsx
│   │   ├── Connection.tsx
│   │   └── Controls.tsx
│   │
│   ├── NodeEditor/          // 노드 편집 컴포넌트
│   ├── ConnectionEditor/    // 연결 편집 컴포넌트
│   └── Visualization/      // 시각화 컴포넌트
│       ├── NeuralView/
│       └── MindMapView/
```

### 2.2 노트 컴포넌트
```typescript
features/notes/
├── components/
│   ├── NoteEditor/
│   │   ├── index.tsx
│   │   ├── Toolbar.tsx
│   │   └── Preview.tsx
│   │
│   └── NodeConnection/     // 노드-노트 연결 UI
```

## 3. 상태 관리

### 3.1 시냅스 맵 스토어
```typescript
interface SynapseMapState {
  nodes: Map<string, Node>;
  connections: Map<string, Connection>;
  selectedNode: string | null;
  selectedConnection: string | null;
  viewMode: 'neural' | 'mindmap';
  zoom: number;
  position: { x: number; y: number };
}

const useSynapseMapStore = create<SynapseMapState>((set) => ({
  // 상태 및 액션 정의
}));
```

### 3.2 노트 스토어
```typescript
interface NoteState {
  notes: Map<string, Note>;
  activeNote: string | null;
  linkedNodes: Map<string, string[]>;
  unsavedChanges: boolean;
}

const useNoteStore = create<NoteState>((set) => ({
  // 상태 및 액션 정의
}));
```

## 4. 데이터 모델

### 4.1 시냅스 맵 모델
```typescript
interface Node {
  id: string;
  type: NodeType;
  title: string;
  summary: string;
  tags: string[];
  strength: number;
  metadata: NodeMetadata;
}

interface Connection {
  id: string;
  sourceId: string;
  targetId: string;
  type: ConnectionType;
  strength: number;
  explanation: string;
  metadata: ConnectionMetadata;
}
```

### 4.2 노트 모델
```typescript
interface Note {
  id: string;
  type: NoteType;
  content: {
    markdown: string;
    codeBlocks: CodeBlock[];
    attachments: Attachment[];
  };
  linkedNodes: LinkedNode[];
  metadata: NoteMetadata;
}
```

## 5. API 통합

### 5.1 시냅스 맵 API
```typescript
const synapseMapApi = {
  nodes: {
    create: (node: CreateNodeDTO) => Promise<Node>;
    update: (id: string, node: UpdateNodeDTO) => Promise<Node>;
    delete: (id: string) => Promise<void>;
    getConnections: (id: string) => Promise<Connection[]>;
  },
  connections: {
    create: (connection: CreateConnectionDTO) => Promise<Connection>;
    update: (id: string, connection: UpdateConnectionDTO) => Promise<Connection>;
    delete: (id: string) => Promise<void>;
  }
};
```

### 5.2 노트 API
```typescript
const noteApi = {
  notes: {
    create: (note: CreateNoteDTO) => Promise<Note>;
    update: (id: string, note: UpdateNoteDTO) => Promise<Note>;
    delete: (id: string) => Promise<void>;
    linkToNode: (noteId: string, nodeId: string) => Promise<void>;
  }
};
```

## 6. 성능 최적화

### 6.1 렌더링 최적화
```typescript
// 가상화된 노드 렌더링
const VirtualizedNodes = memo(({ nodes, viewPort }) => {
  const visibleNodes = useVisibleNodes(nodes, viewPort);
  return visibleNodes.map(node => <Node key={node.id} {...node} />);
});

// 연결선 최적화
const OptimizedConnections = memo(({ connections, zoom }) => {
  const simplifiedConnections = useSimplifiedConnections(connections, zoom);
  return simplifiedConnections.map(conn => <Connection key={conn.id} {...conn} />);
});
```

### 6.2 상태 업데이트 최적화
```typescript
// 디바운스된 노드 업데이트
const useDebounceNodeUpdate = (nodeId: string, changes: Partial<Node>) => {
  return useDebounce(() => updateNode(nodeId, changes), 500);
};

// 메모이즈된 연결 계산
const useMemoizedConnections = (nodeId: string) => {
  return useMemo(() => calculateConnections(nodeId), [nodeId]);
};
```

이 프로젝트 구조는 시냅스 맵을 중심으로 한 지식 연결 플랫폼의 효율적인 구현을 지원합니다. 각 컴포넌트와 기능은 모듈화되어 있어 유지보수와 확장이 용이하며, 성능 최적화를 위한 전략도 포함되어 있습니다.
